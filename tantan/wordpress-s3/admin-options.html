<?php if ($error):?>
<div id="message" class="error fade"><p><strong><?php echo $error?></strong></p></div>
<?php elseif ($message):?>
<div id="message" class="updated fade"><p><strong><?php echo $message?></strong></p></div>
<?php endif;?>
<script type="text/javascript">
function s3_selectBucket(obj) {
    if (obj.options[obj.selectedIndex].value == 'new') {
        var bucket = prompt("Bucket name: ");
        if (bucket) {
            var len = obj.options.length
            obj.options[len] = new Option("New bucket: " + bucket, bucket);
            obj.options[len].selected = true;
        }
    }
}
</script>
<style type="text/css">
fieldset.options {
    clear:both;
    border:1px solid #ccc;
}
fieldset.options legend {
    font-family: Georgia,"Times New Roman",Times,serif;
    font-size: 22px;
}

div.album {
    float:left;
    width:200px;
    height:150px;
    margin-right:15px;
}
div.album td {
    font-size:0.9em;
}
div.album-hidden img {
    opacity:0.5;
}
</style>


<div class="wrap">
<h2 id="write-post">Amazon S3 Plugin for WordPress</h2>
<?php
global $TanTanVersionCheck;
if (is_object($TanTanVersionCheck)):?>
<div style="width:200px; border:1px solid #ccc;padding:10px; float:right; margin:0 0 10px 10px;">
<strong>Plugin Updates:</strong><br />
<a href="plugins.php?page=tantan/version-check.php">Check for updates to this plugin &gt;</a>
</div>
<?php endif;?>

<p>
This plugin allows you to easily upload, retrieve, and link to files stored on Amazon's S3 web service from within WordPress. 

</p>
<p><strong>Amazon S3 Setup:</strong> If you don't have an Amazon S3 account yet, here's a <a href="http://www.brightcove.com/title.jsp?title=769277068&channel=770166766">quick video tutorial</a> that'll show
you how to set one up. <a href="http://www.amazon.com/s3/">Sign up for Amazon S3 &gt;</a>
</p>

<p><strong>Plugin Installation and Usage:</strong> Just follow the onscreen prompts to link this plugin to your Amazon S3 account. 
Once your account is linked, you will see an "Amazon S3" tab in your edit screen. </p>


<div  style="float:right;width:250px;background:#eee;padding:10px;font-size:0.9em;">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
If you find this plugin helpful, please consider donating a few dollars to support this plugin. Thanks!
<br /><br />
<input type="hidden" name="cmd" value="_s-xclick">
<input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but04.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----">

</form>
</div>


<p>
This plugin is provided by <a href="http://www.tantannoodles.com">TanTanNoodles</a> 
and licensed free of charge for you to use under the GPL.
This plugin is <em>unsupported</em> and comes with no official technical support. 
</p>
<p>
You can check the following pages for the latest updates to this plugin, along with any unofficial technical support:<br />
<br />
<strong>Release Page:</strong> <a href="http://tantannoodles.com/toolkit/wordpress-s3/">tantannoodles.com/toolkit/wordpress-s3/</a><br />
<strong>Project Page:</strong> <a href="http://code.google.com/p/wordpress-s3/">code.google.com/p/wordpress-s3/</a><br />
<strong>Support Group:</strong> none yet<br />
</p>
<p>
<strong>RSS Updates:</strong> Subscribe to the <a href="http://feeds.feedburner.com/TanTanToolkit">TanTanToolkit feed</a> and get notified when there's an update to this plugin.
</p>




<fieldset class="options">
<legend>Amazon S3 Settings</legend>

<table width="100%" cellspacing="2" cellpadding="5" class="editform"> 
<form method="post">
<input type="hidden" name="action" value="save" />
<tr valign="top">
<th width="33%" scope="row">AWS Access Key ID:</th> 
<td><input type="text" name="options[key]" value="<?php echo $options['key'];?>" size="50" /></td> 
</tr>
<tr valign="top">
<th width="33%" scope="row">Secret Key:</th> 
<td><input type="text" name="options[secret]" value="<?php echo ($options['secret'] ? '-- not shown --' : '');?>" size="50" /><br />
<small><a href="http://aws-portal.amazon.com/gp/aws/developer/account/index.html/?ie=UTF8&action=access-key">Login to Amazon.com to retrieve your Secret Key &gt;</a></small></td> 
</tr>
<?php if (!$buckets):?>
<tr valign="top">
<td colspan="2">
<p class="submit">
<input type="submit" value="Authenticate Account &gt;" />
</p>
</td>
</tr>
<?php else:?>
	<tr valign="top">
	<th width="33%" scope="row">Use this bucket:</th> 
	<td>
	<select name="options[bucket]" size="1" onchange="return s3_selectBucket(this)">
	<option value="">Please select a bucket...</option>
	<?php if (is_array($buckets)) foreach ($buckets as $bucket):?>
	    <option value="<?php echo $bucket?>" <?php echo ($bucket == $options['bucket'] ? 'selected="selected"' : '')?>>&nbsp; &nbsp; <?php echo $bucket?></option>
	<?php endforeach;?>
	<option></option>
	<option value="new">Create a new bucket...</option>
	</select><br />
	</td> 
	</tr>

	<tr valign="top">
	<th width="33%" scope="row">Host name settings:</th> 
	<td>
		<input type="checkbox" name="options[virtual-host]" value="1" id="virtual-host" <?php echo ($options['virtual-host'] ? 'checked="checked" ' : '');?> />
			<label for="virtual-host"> Bucket is setup for virtual hosting.</label> (<a href="http://docs.amazonwebservices.com/AmazonS3/2006-03-01/VirtualHosting.html">more info</a>)
	</td> 
	</tr>

	<tr valign="top">
	<th width="33%" scope="row">File Uploads:</th> 
	<td>
		<input type="checkbox" name="options[wp-uploads]" value="1" id="wp-uploads" <?php echo ($options['wp-uploads'] ? 'checked="checked" ' : '');?> />
			<label for="wp-uploads"> Use Amazon S3 for storage when uploading via WordPress' upload tab.</label>
			<br /><small>Note: Uncheck this to revert back to using your own web host for storage at anytime.</small>
	</td> 
	</tr>
    
	<tr valign="top">
	<th width="33%" scope="row">Expires Header:</th> 
	<td>
		<input type="checkbox" name="options[expires]" value="315360000" id="expires" <?php echo ($options['expires']? 'checked="checked" ' : '');?> />
		<label for="expires"> Set a <a href="http://developer.yahoo.com/performance/rules.html#expires" target="_blank">far future HTTP expiration header</a> for uploaded files <em>(recommended)</em>.</label>
	</td> 
	</tr>
    
	<tr valign="top">
	<th width="33%" scope="row">File Permissions:</th> 
	<td>
		<input type="checkbox" name="options[permissions]" value="public" id="permissions" <?php echo ($options['permissions']=='public' ? 'checked="checked" ' : '');?> />
		<label for="permissions"> Make sure all files in the selected bucket are publicly accessible.</label>
	</td> 
	</tr>


<tr valign="top">
<th width="33%" scope="row">&nbsp;</th> 
<td>
Uploading files <em>directly</em> to your Amazon S3 account is not currently supported by this plugin (uploads must temporarily pass through your blog).
But, there are a some free tools to help you upload and manage your files on directly on Amazon S3. Here are some suggested tools:

<ul>
    <li><a href="http://www.rjonna.com/ext/s3fox.php">S3 Firefox Organizer</a> - Provides an user friendly FTP like interface to Amazon S3 from within Firefox. After installing, select <em>Tools &gt; S3 Organizer</em> to use it. <em>(recommended)</em></li>
    <li><a href="http://s3.amazonaws.com/ns3/home">NS3 Manager</a> - Lightweight Windows based front-end to Amazon S3. A little buggy, but it works.</li>
    <li><a href="http://www.suchwerk.net/sodcms_AMAZON_S3DRIVE.htm">S3Drive</a> - Windows application that lets you access the Amazon web space as a local network drive.</li>
    <li><a href="http://solutions.amazonwebservices.com/connect/kbcategory.jspa?categoryID=66">Amazon Resources Library</a> - A directory of resources that use the Amazon S3 service. This directory is managed by Amazon.</li>
    <!--
    <li><a href="http://www.jungledisk.com">JungleDisk</a> - Cross platform utility that creates a network drive on your computer to help you manage your Amazon S3 account.</li>
    <li><a href="http://www.maluke.com/s3man/">S3Backup</a> - Cross platform utility, primarily used for online backups.</li>
    -->
</ul>

<br />
</td>
</tr>

<tr>
<td colspan="2">
<p class="submit">
<input type="submit" value="Save &gt;" />
</p>
</td>
</tr>
<?php endif;?>


</form>

</table>



</fieldset>






</div>